Install Wazuh components using the assistant
--------------------------------------------

Install and configure the different Wazuh components with the aid of the Wazuh installation assistant. 

.. note:: You need root user privileges to run all the commands described below.

Please, make sure that a copy of the ``wazuh-install-files.tar`` and ``wazuh-offline.tar.gz`` files, created during the initial configuration step, is placed in your working directory.

Installing the Wazuh indexer
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Install and configure the Wazuh indexer nodes. 


#. Run the assistant with the ``--offline-install`` to perform an offline installation. Also, run the assistant with the option ``--wazuh-indexer`` and the node name to install and configure the Wazuh indexer. The node name must be the same one used in ``config.yml`` for the initial configuration, for example, ``node-1``.
      
      .. code-block:: console

        # bash wazuh-install.sh --offline-install --wazuh-indexer node-1 


    Repeat this stage of the installation process for every Wazuh indexer node in your cluster. Then proceed with initializing your single-node or multi-node cluster in the next step.

#. Run the Wazuh installation assistant with option ``--start-cluster`` on any Wazuh indexer node to load the new certificates information and start the cluster. 

   .. code-block:: console
 
     # bash wazuh-install.sh --start-cluster
 
   .. note:: You only have to initialize the cluster `once`, there is no need to run this command on every node. 

Installing the Wazuh manager
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

#. Run the assistant with the ``--offline-install`` to perform an offline installation. Also, run the assistant with the option ``--wazuh-server`` followed by the node name to install the Wazuh server. The node name must be the same one used in ``config.yml`` for the initial configuration, for example, ``wazuh-1``.
 
   .. code-block:: console
  
       # bash wazuh-install.sh --offline-install --wazuh-server wazuh-1


Your Wazuh server is now successfully installed. 

- If you want a Wazuh server single-node cluster, everything is set and you can proceed directly with the next stage.
      
- If you want a Wazuh server multi-node cluster, repeat this process on every Wazuh server node.


Installing the Wazuh dashboard
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

#. Run the assistant with the ``--offline-install`` to perform an offline installation. Also, run the assistant with the option ``--wazuh-dashboard`` and the node name to install and configure the Wazuh dashboard. The node name must be the same one used in ``config.yml`` for the initial configuration, for example, ``dashboard``.
   
   .. code-block:: console

      # bash wazuh-install.sh --wazuh-dashboard dashboard

   The default Wazuh web user interface port is 443, used by the Wazuh dashboard. You can change this port using the optional parameter ``-p|--port <port_number>``. Some recommended ports are 8443, 8444, 8080, 8888, and 9000.

   Once the assistant finishes the installation, the output shows the access credentials and a message that confirms that the installation was successful.

   .. code-block:: none
      :emphasize-lines: 3,4          
    
      INFO: --- Summary ---
      INFO: You can access the web interface https://<wazuh-dashboard-ip>
         User: admin
         Password: <ADMIN_PASSWORD>

      INFO: Installation finished.

   You now have installed and configured Wazuh. All passwords generated by the Wazuh installation assistant can be found in the ``wazuh-passwords.txt`` file inside the ``wazuh-install-files.tar`` archive. To print them, run the following command:
   
   .. code-block:: console
   
      # tar -O -xvf wazuh-install-files.tar wazuh-install-files/wazuh-passwords.txt

#. Access the Wazuh web interface with your credentials. 

   -  URL: *https://<wazuh-dashboard-ip>*
   -  **Username**: *admin*
   -  **Password**: *<ADMIN_PASSWORD>*

   When you access the Wazuh dashboard for the first time, the browser shows a warning message stating that the certificate was not issued by a trusted authority. An exception can be added in the advanced options of the web browser. For increased security, the ``root-ca.pem`` file previously generated can be imported to the certificate manager of the browser instead. Alternatively, a certificate from a trusted authority can be configured. 
